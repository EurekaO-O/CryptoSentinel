### 🟢 阶段 0：角色设定与全局规范 (Project Context)

*在使用任何具体指令前，先发送这条，给 AI 设定“人设”和代码规范。*

> **提示词 1：** 你现在是一位拥有 10 年经验的资深 Go 语言后端工程师。我要开发一个名为 "CryptoSentinel" 的加密货币定投监控机器人。
>
> **项目目标：** 这是一个命令行工具，每周定时抓取比特币指标（如 AHR999），结合预设的投资策略，通过 Telegram 发送买入/卖出建议。
>
> **技术栈要求：**
>
> 1. 语言：Go (Golang) 最新版。
> 2. 架构：遵循 Standard Go Project Layout (cmd, internal, pkg, configs)。
> 3. 依赖管理：Go Modules。
> 4. 代码风格：清晰、模块化、强类型、包含详细注释。
> 5. 错误处理：严谨，不要忽略任何 error。
>
> 请确认你理解了上述背景。如果理解，请只回复 "Ready"。

------

### 🟡 阶段 1：项目骨架与配置 (Skeleton & Config)

*先搭架子，保证结构正确。*

> **提示词 2：** 第一步，请帮我设计项目的目录结构和配置模块。
>
> **需求：**
>
> 1. 请给出推荐的目录树结构（文本形式）。
> 2. 创建 `configs/config.yaml` 文件模板，包含：
>    - Telegram Bot Token
>    - Telegram Chat ID
>    - AHR999 数据源 URL
>    - 定时任务的时间表达式 (Cron spec)
> 3. 编写 `internal/config` 包的 Go 代码，使用 `spf13/viper` 或标准库读取 yaml 配置，并映射到结构体。
> 4. **注意：** 代码中不要硬编码 Token，说明如何通过环境变量覆盖配置。

------

### 🟠 阶段 2：数据采集核心 (Data Collector)

*这是最难的部分，让 AI 帮你写爬虫逻辑。*

> **提示词 3：** 第二步，我们需要实现数据采集模块。请在 `internal/collector` 包下编写代码。
>
> **任务：** 创建一个 `FetchAHR999()` 函数。
>
> **逻辑提示：**
>
> 1. 目标是从网络获取 AHR999 指数（浮点数）。
> 2. 由于交易所 API 通常不提供此数据，请写一个基于 `net/http` 的请求。
> 3. 假设数据源是一个返回 JSON 的接口（你可以先预留 URL 占位符）。
> 4. 如果需要解析 HTML (比如从 Coinglass)，请引入 `github.com/PuerkitoBio/goquery` 并给出一段示例解析逻辑（提取 class 为 "ahr-value" 的 div 内容）。
> 5. 请模拟一个 User-Agent 头，防止被简单的反爬拦截。
> 6. 定义一个标准的数据结构 `MarketData` 返回给上层。

------

### 🔵 阶段 3：策略逻辑 (Strategy Engine)

*把你的“投资誓言”转化为代码。*

> **提示词 4：** 第三步，实现核心投资策略逻辑。请在 `internal/strategy` 包下编写代码。
>
> **业务逻辑（必须严格遵守）：** 输入参数：当前 AHR999 指数 (float64), 当前账户杠杆率 (float64)。 输出结构：Action (买入/卖出/持有), AmountFactor (资金倍率), Message (文本理由)。
>
> **规则表：**
>
> 1. **风控规则（最高优先级）：** 如果 杠杆率 > 1.5，Action="警告"，提示"杠杆过高，停止买入"。
> 2. **抄底区：** 如果 AHR999 < 0.45，Action="贪婪买入"，资金倍率 1.5x。
> 3. **定投区：** 如果 AHR999 在 0.45 到 0.80 之间，Action="定投"，资金倍率 1.0x。
> 4. **持有区：** 如果 AHR999 在 0.80 到 1.2 之间，Action="持有观望"。
> 5. **逃顶区：** 如果 AHR999 > 1.2，Action="卖出"。
>
> 请编写单元测试 (Unit Test) 来验证上述 5 种情况是否覆盖正确。

------

### 🟣 阶段 4：通知与主程序 (Notifier & Main)

*将各个模块串联起来。*

> **提示词 5：** 第四步，我们需要完成通知模块和程序入口。
>
> **任务 A (Notifier)：** 在 `internal/notifier` 包中实现 Telegram 发送功能。
>
> - 使用简单的 HTTP Post 请求调用 Telegram Bot API (`sendMessage` 接口)。
> - 传入消息文本，发送给配置中的 Chat ID。
>
> **任务 B (Main)：** 在 `cmd/bot/main.go` 中将所有模块串联起来。
>
> - 初始化 Config。
> - 初始化 Logger。
> - 使用 `robfig/cron` 库设置定时任务（读取配置中的 Cron 表达式）。
> - 在 Cron 任务中：调用 Collector -> 调用 Strategy -> 生成文案 -> 调用 Notifier。
> - 保持主程序阻塞运行 (使用 `select{}` 或 `signal.Notify`)。

------

### 🔴 阶段 5：安全部署 (Docker Security)

*这就是你特别关心的防黑客部分。*

> **提示词 6：** 最后一步，请为这个项目编写 `Dockerfile` 和 `docker-compose.yml`。
>
> **安全强制要求（必须遵守）：**
>
> 1. 使用多阶段构建 (Multi-stage build) 以减小镜像体积（使用 `golang:alpine` 编译，`alpine` 运行）。
> 2. **非 Root 用户运行：** 在运行阶段，必须创建一个名为 `appuser` 的非 root 用户，并切换到该用户运行程序。不要使用默认的 root 权限！
> 3. 敏感信息（API Key, Chat ID）必须通过 Docker 的 `environment` 变量传入，绝不能写在 Dockerfile 里。